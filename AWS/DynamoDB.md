## DynamoDB LSI vs GSI

_Local Secondary Index & Global Secondary Index_

### Key Difference

|     구분      |           LSI            |          GSI           |
| :-----------: | :----------------------: | :--------------------: |
|   파티션 키   |    기본 테이블과 동일    |          자유          |
|    정렬 키    | 기본 테이블과 달라야 함  |          자유          |
|   생성 시점   | 테이블 생성 시 함께 생성 |          자유          |
|   크기 제한   |      파티션 당 10GB      |         무제한         |
|  처리량 공유  |    기본 테이블과 공유    |     독립적 처리량      |
|    일관성     |    Strong Consistency    | Eventually Consistency |
| 업데이트 방식 |          동기식          |        비동기식        |

### LSI

- 기본 테이블과 동일한 파티션 키, 다른 정렬 키를 가지는 인덱스
- 같은 파티션 키를 가진 항목들에 대한 추가 쿼리 지원
- 기본 테이블과 같은 파티션을 공유하므로 LSI에 대한 업데이트는 기본 테이블과 함께 원자적으로 처리됨
- 예시: 특정 사용자의 게시글을 날짜순으로 정렬할 때
- 필요한 경우들
  - Strong Consistency를 보장해야 할 때
  - 같은 파티션 키, 다른 정렬 순서가 필요할 때
  - 읽기 작업 시 Read Through가 필요한 경우

### GSI

- 기본 테이블과 다른 파티션 키, 다른 정렬 키를 가질 수 있는 인덱스
- 테이블 전체에 걸쳐서 쿼리 지원
- 비동기적으로 업데이트되므로, 결과적 일관성을 보장하는 방식
- 예시: 이메일 주소로 모든 사용자를 검색할 때
- 필요한 경우들
  - 기본 테이블 파티션 키와는 다른 속성으로 쿼리해야 할 때
  - 10GB 이상의 대용량 데이터를 인덱싱할 때
  - 차후 인덱스 추가/삭제가 필요한 경우
